## Purpose

定义家教信息解析与标准化能力，保证在文本不规则场景下仍能稳定抽取、回溯与持续迭代。

## Requirements

### Requirement: 家教关键信息抽取
系统 MUST 从公众号文章文本中抽取可检索的家教信息字段，包括城市、区域、年级、科目、地址、时间安排、薪资、老师要求与发布时间。

#### Scenario: 文本包含完整字段
- **WHEN** 文章文本中包含上述字段的明确描述
- **THEN** 系统输出结构化字段并与原文建立可追溯关联

### Requirement: 不规则文本与缺失字段兼容
系统 SHALL 支持非固定格式文本解析，对无法识别的字段留空而非中断整条记录入库。

#### Scenario: 文本字段部分缺失
- **WHEN** 文章中仅出现城市、科目与薪资等部分字段
- **THEN** 系统保存可识别字段并将缺失字段置为空值

### Requirement: 多条家教信息拆分
系统 MUST 支持单篇文章中包含多条家教信息时进行拆分入库，避免多条需求被覆盖为单条记录。

#### Scenario: 单文多条需求
- **WHEN** 文章中存在两个及以上明显分段的家教需求
- **THEN** 系统输出多条结构化记录，并使用同一来源 URL 的后缀标识分条结果（如 `#item-2`）

### Requirement: 薪资按字符串原样保留
系统 MUST 将薪资字段按原文字符串保存，不要求在 MVP 阶段做数值化拆分。

#### Scenario: 薪资为非标准表达
- **WHEN** 文章中出现“面议”“自报价”或复合表达
- **THEN** 系统按原文完整保存该薪资字符串

### Requirement: 原始片段回溯能力
系统 MUST 在结构化结果中保留字段对应的原始文本片段，支持后续核对与规则迭代。

#### Scenario: 运营核对解析结果
- **WHEN** 运营人员查看结构化字段来源
- **THEN** 系统可返回对应原文片段与文章来源链接

### Requirement: LLM 解析失败自动回退规则解析
系统 SHALL 在启用 LLM 解析模式时，若 LLM 调用失败或返回异常结果，自动回退到规则解析以保障任务可用性。

#### Scenario: LLM 解析异常
- **WHEN** LLM 请求超时或返回无效结构
- **THEN** 系统自动使用规则解析继续处理，不因单次 LLM 故障中断主流程
