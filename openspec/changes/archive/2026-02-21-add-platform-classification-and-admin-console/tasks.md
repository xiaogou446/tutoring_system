## 1. 数据库与主数据模型

- [x] 1.1 新增平台主数据表（`crawl_platform`）与管理员账号表（`admin_user`）DDL，补充索引与注释
- [x] 1.2 扩展 `article_raw` 与任务相关表新增 `platform_code` 字段，并建立引用与查询索引
- [x] 1.3 设计历史数据回填脚本，将存量记录回填默认平台编码（如 `MIAOMIAO_WECHAT`）
- [x] 1.4 在 Java `infrastructure` 模块补齐 DO/Mapper/XML/Repository 映射并通过编译校验

## 2. 平台路由解析链路（Python crawler）

- [x] 2.1 增加平台解析器路由层（`platformCode -> parser`），接入现有规则解析与后续扩展点
- [x] 2.2 调整采集与补采流程入参，确保任务与 `article_raw` 写入平台编码
- [x] 2.3 为未支持平台实现安全失败逻辑（错误码、错误信息、任务失败状态）
- [x] 2.4 保持 `tutoring_info` 生成流程兼容，验证统一 `article_raw.content_text` 产出契约

## 3. 采集与补采能力改造（Java + Python 协同）

- [x] 3.1 改造自动采集逻辑，使“来源文章标识 + 平台编码”共同参与幂等判定
- [x] 3.2 改造手动补采（CLI 与后台入口），统一透传平台编码并复用同一任务状态机
- [x] 3.3 明确 Java 调 Python 命令执行护栏：参数化调用、并发上限、超时控制、异常回收
- [x] 3.4 将 Python 执行 stdout/stderr 与退出码映射为任务日志，便于后台统一展示

## 4. 后台认证能力（admin-console-auth）

- [x] 4.1 实现管理员登录接口，基于 DB 预置账号密码（哈希校验）完成鉴权
- [x] 4.2 实现 JWT 签发与校验中间层，采用 Cookie 传递并保护后台受限接口
- [x] 4.3 补充登录失败、令牌过期、未认证访问的统一错误响应
- [x] 4.4 落地管理员初始化策略（迁移脚本或运维初始化命令）

## 5. 后台导入页面与接口（admin-content-import）

- [x] 5.1 实现平台下拉查询接口，仅返回启用且可用的平台主数据
- [x] 5.2 实现后台导入接口：平台选择 + URL 列表提交 + 入任务编排
- [x] 5.3 实现导入校验：URL 合法性、请求内去重、单次最多 10 条
- [x] 5.4 在 web 新增导入页并完成表单交互、错误提示与任务受理反馈

## 6. 后台日志中心（admin-runtime-log-center）

- [x] 6.1 定义日志查询接口，支持 `runtime=java|python`、关键字与时间范围筛选
- [x] 6.2 接入 Java Slf4j 日志读取（INFO/WARN/ERROR）并屏蔽下载能力
- [x] 6.3 配置 Java 日志按天滚动与 30 天保留策略，确保后台仅可查保留期内日志
- [x] 6.4 接入 Python crawler 采集过程日志读取并统一展示格式

## 7. 任务可观测与运行端标识增强

- [x] 7.1 扩展任务日志模型，增加运行端与阶段信息（Java 编排 / Python 执行）
- [x] 7.2 完善失败日志结构，记录命令执行失败摘要与可读错误信息
- [x] 7.3 验证自动/手动任务统计口径在平台扩展后仍一致
- [x] 7.4 补充重试场景在平台维度与运行端维度下的日志可追踪性

## 8. 测试与验收

- [ ] 8.1 补齐数据库与仓储层测试：平台字段写入、幂等规则、回填兼容性
- [ ] 8.2 补齐 crawler 测试：平台路由解析、未支持平台失败、统一 content_text 输出
- [ ] 8.3 补齐后端接口测试：登录/JWT、导入上限 10 条、日志筛选接口
- [ ] 8.4 补齐前端关键流程验收：后台登录 -> 导入 -> 日志查看
- [ ] 8.5 执行受影响模块回归命令并记录结果（Java、web、crawler）

## 9. 发布与回滚准备

- [ ] 9.1 输出部署配置清单（JWT 参数、日志路径、日志保留策略、Python 执行路径）
- [ ] 9.2 完成灰度发布与监控项配置（任务成功率、导入失败率、日志接口耗时）
- [ ] 9.3 准备回滚手册（功能开关、默认平台回退、故障处理流程）
